---
- set_fact:
    user: bstineha

# - name: Get info for a single service
#   ansible.windows.win_service_info:
#     name: W3SVC
#   register: service_info

# - name: Show webserver details
#   debug: 
#     msg: "{{ ansible_host }}"

- name: IIS service info
  win_service:
    name: W3SVC
  register: iis_service_info

- name: Show IIS service dependencies
  debug: 
    var: iis_service_info|map(attribute='dependencies')|list

# - name: Restart a IIS service
#   win_service:
#     name: W3SVC
#     state: restarted